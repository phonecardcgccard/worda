// index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mini Crossword Puzzle</n></title>
  <style>
    body { font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; padding: 20px; }
    #board { display: grid; grid-template-columns: repeat(4, 100px); gap: 10px; margin-top: 20px; }
    .cell { width: 100px; height: 100px; background: #f0f0f0; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 24px; }
    .matched { background: #8bc34a; color: #fff; cursor: default; }
  </style>
</head>
<body>
  迷你填字游戏<h1>Mini Crossword Puzzle</h1>
  <div id="board"></div>
  <script type="module" src="main.js" defer></script>
</body>
</html>

// state.js
export const initialState = {
  board: [],      // array of letters
  flipped: [],    // indices of flipped cards
  matched: []     // indices of matched cards
};

export function reducer(state   状态, action   行动) {
  switch (action.type) {
    case 'INIT':
      return { ...state, board: action.payload, flipped   翻: [], matched: [] };
    case 'FLIP':
      if (state.flipped.includes(action.index) || state   状态.matched.includes(action   行动.index)) return state   状态;
      return { ...state, flipped: [...state   状态.flipped   翻, action   行动.index] };
    case 'CHECK':
      const [i, j] = state.flipped;
      if (state.board[i] === state.board[j]) {
        return { ...state, matched: [...state   状态.matched, i, j], flipped   翻: [] };
      } else {
        return { ...state, flipped: [] };
      }
    default:
      return state   状态;
  }
}

// ui.js
export function renderBoard(state   状态, dispatch   调度) {
  const boardEl = document.getElementById('board');
  boardEl.innerHTML = '';
  state.board   董事会.forEach((letter, idx) => {
    const cell = document.createElement('div');
    cell.className = 'cell';
    if (state.matched.includes(idx)) cell.classList.add('matched');
    cell.textContent = state   状态.flipped   翻.includes(idx) || state.matched.includes(idx) ? letter : '';
    cell.dataset.index = idx;
    cell.addEventListener('click', () => dispatch   调度({ type: 'FLIP'   “翻转”, index: idx }));
    boardEl.appendChild(cell);
  });
}

// game.js
export function generateBoard() {
  const letters = ['A','B','C'   “C”,'D','A','B','C','D'];
  // shuffle   / /洗牌
  for (let i = letters.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [letters[i], letters[j]] = [letters   信[j], letters   信[i]];
  }
  return letters   信;
}

// main.js
import { initialState, reducer } from './state.js';
import { renderBoard } from './ui.js';
import { generateBoard } from './game.js';

let state = initialState;

function dispatch(action) {
  state = reducer(state, action);
  renderBoard(state, dispatch);
  if (action.type === 'FLIP' && state.flipped.length === 2) {
    setTimeout(() => dispatch({ type: 'CHECK' }), 1000);
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const board = generateBoard();
  dispatch({ type: 'INIT', payload: board });
});

